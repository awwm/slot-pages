(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var l in s)e.o(s,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:s[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,s=window.wp.i18n,l=window.wp.blockEditor,i=window.wp.components,o=window.wp.apiFetch;var n=e.n(o);const r=window.wp.element,a=window.ReactJSXRuntime;(0,t.registerBlockType)("slot-pages/slots-grid",{title:(0,s.__)("Slots Grid","slot-pages"),icon:"grid-view",category:"widgets",attributes:{limit:{type:"number",default:6},sorting:{type:"string",default:"recent"}},edit({attributes:e,setAttributes:t}){const{limit:o,sorting:d}=e,[p,g]=(0,r.useState)([]);return(0,r.useEffect)((()=>{n()({path:"/slot-pages/v1/slots"}).then((e=>{let t=[...e];"random"===d&&t.sort((()=>.5-Math.random())),g(t.slice(0,o))}))}),[o,d]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.InspectorControls,{children:(0,a.jsxs)(i.PanelBody,{title:(0,s.__)("Grid Settings","slot-pages"),children:[(0,a.jsx)(i.RangeControl,{label:(0,s.__)("Number of Slots","slot-pages"),value:o,onChange:e=>t({limit:e}),min:1,max:20}),(0,a.jsx)(i.SelectControl,{label:(0,s.__)("Sorting Mode","slot-pages"),value:d,options:[{label:(0,s.__)("Recent","slot-pages"),value:"recent"},{label:(0,s.__)("Random","slot-pages"),value:"random"}],onChange:e=>t({sorting:e})})]})}),(0,a.jsx)("div",{className:"slots-grid-preview",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"10px"},children:p.map((e=>(0,a.jsxs)("div",{style:{border:"1px solid #ddd",padding:"10px",textAlign:"center"},children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.title,style:{maxWidth:"100%"}}),(0,a.jsx)("strong",{children:e.title}),(0,a.jsx)("div",{children:e.provider})]},e.id)))})]})},save:()=>null}),(0,t.registerBlockType)("slot-pages/slot-detail",{title:(0,s.__)("Slot Detail","slot-pages"),icon:"info-outline",category:"widgets",edit(){const[e,t]=(0,r.useState)(null);return(0,r.useEffect)((()=>{n()({path:"/slot-pages/v1/latest-slot"}).then((e=>{t(e)}))}),[]),e?(0,a.jsxs)("div",{className:"slot-detail-preview",style:{border:"1px solid #ddd",padding:"10px"},children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.title,style:{maxWidth:"100%",marginBottom:"10px"}}),(0,a.jsx)("h3",{children:e.title}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:(0,s.__)("Provider:","slot-pages")})," ",e.provider]}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})]}):(0,a.jsx)("p",{children:(0,s.__)("Loading latest slot...","slot-pages")})},save:()=>null})})();